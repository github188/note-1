#用户-岗位-组织机构

##PUB_USER_EMPLOYEE 用户对应的岗位与部门

### 根据用户获取岗位编码 (工业树)
	SELECT
		B.POSITION_CODE,
		B.ORGAN_ID,
		C.ORGAN_NAME
	FROM
		PUB_STRU B,
		PUB_ORGAN C
	WHERE
		B.ORGAN_ID=(
			SELECT
				ORGAN_ID
			FROM
				PUB_STRU A
			WHERE
				EXISTS(
					SELECT
						1
					FROM
						PUB_USER_EMPLOYEE B
					WHERE
						A.STRU_ID=B.EMPLOYEE_ID
						AND B.USER_ID=''
				)
		)
		AND B.ORGAN_ID=C.ORGAN_ID
		AND B.STRU_TYPE='11'
### 根据岗位编码获取用户名（工业树）
	SELECT
		A.ORGAN_ID,
		C.ORGAN_NAME,
		B.USER_ID
	FROM
		PUB_STRU A,
		PUB_USER_EMPLOYEE B,
		PUB_ORGAN C
	WHERE
		A.STRU_TYPE='00'
		AND A.STRU_ID=B.EMPLOYEE_ID
		AND A.ORGAN_ID=C.ORGAN_ID
		AND A.ORGAN_ID=(
			SELECT
				ORGAN_ID
			FROM
				PUB_STRU
			WHERE
				POSITION_CODE=''
				AND STRU_TYPE='11'
		)
### 根据组织机构获取岗位编码用户名（工业树）
	SELECT
		A.POSITION_CODE,
		B.USER_ID
	FROM
		PUB_STRU A,
		PUB_USER_EMPLOYEE B
	WHERE
		A.STRU_TYPE='11'
		AND A.ORGAN_ID=''
		AND B.EMPLOYEE_ID=(
			SELECT
				STRU_ID
			FROM
				PUB_STRU
			WHERE
				STRU_TYPE='00'
				AND ORGAN_ID=''
		)
