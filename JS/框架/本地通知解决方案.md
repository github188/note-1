# 打包APP要弹出本地通知，目前方案如下

##	客户端注册与服务端发送都是通过极光公共平台，过程对于开发者是透明的

- 在极光官网注册，创建应用程序获取Appkey
- IMR引入jar包，在需要推送消息的地方调用API，使用HTTPclient
	curl --insecure -X POST -v https://api.jpush.cn/v3/push -H "Content-Type: application/json" -u "7d431e42dfa6a6d693ac2d04:5e987ac6d2e04d95a9d8f0d1" -d '{"platform":"all","audience":"all","notification":{"alert":"Hi,JPush !","android":{"extras":{"android-key1":"android-value1"}},"ios":{"sound":"sound.caf","badge":"+1","extras":{"ios-key1":"ios-value1"}}}}'
	`
	{
		"cid": "8103a4c628a0b98974ec1949-711261d4-5f17-4d2f-a855-5e5a8909b26e",
		"platform": "all",
		"audience": {
			"tag": [
				"深圳",
				"北京"
			]
		},
		"notification": {
			"android": {
				"alert": "Hi, JPush!",
				"title": "Send to Android",
				"builder_id": 1,
				"extras": {
					"newsid": 321
				}
			},
			"ios": {
				"alert": "Hi, JPush!",
				"sound": "default",
				"badge": "+1",
				"extras": {
					"newsid": 321
				}
			}
		},
		"message": {
			"msg_content": "Hi,JPush",
			"content_type": "text",
			"title": "msg",
			"extras": {
				"key": "value"
			}
		},
		"sms_message":{
			"content":"sms msg content",
			"delay_time":3600
		},
		"options": {
			"time_to_live": 60,
			"apns_production": false,
			"apns_collapse_id":"jiguang_test_201706011100"
		}
	}

	`
- app打包添加jpush插件 cordova plugin add jpush-phonegap-plugin --variable API_KEY=your_jpush_appkey
- IMR_M客户端调用jpush接口 JPush.setAlias(alias).then(res => { alert(res) }); 来设置唯一别名
	别名的名称即用户名，发送消息的时候区分用户发送