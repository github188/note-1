Utils = require 'utils'
Templete = require './jspTemplete'
fs = require 'fs'
mkdirSync = ( require 'vendor/mkdirSync' ).mkdirSync

exports.init = ( options )->
	path = Utils.getJspDirPath( options )
	jspName = Utils.getJspName( options.FUNCTION )
	jsppath = path + jspName
	mkdirSync path, 0, ( err )->
		if err
			throw err
		jspcontent = Templete.renderJsp( options )
		fs.writeFile jsppath,new Buffer( jspcontent ),( err )->
			if err
				throw err
			console.log '_renderJsp has finished'