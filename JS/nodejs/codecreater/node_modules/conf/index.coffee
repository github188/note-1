Utils = require 'utils'
Templete = require './confTemplete'
fs = require 'fs'
mkdirSync = ( require 'vendor/mkdirSync' ).mkdirSync

exports.init = ( options )->
	path = Utils.getConfDirPath( options )
	confName = Utils.getConfName( options.FUNCTION )
	confpath = path + confName
	mkdirSync path, 0, ( err )->
		if err
			throw err
		confcontent = Templete.renderConf( options )
		fs.writeFile confpath,new Buffer( confcontent ),( err )->
			if err
				throw err
			console.log '_renderConf has finished'